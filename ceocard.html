<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CeoCard - CRM v3.3.2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="c-style.css">
    <style>
        /* CORREÇÃO DO "X" (PONTO 4) */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            position: relative;
        }
        .modal-header .close {
            cursor: pointer;
            font-size: 1.8rem;
            color: #b2bec3;
            line-height: 1;
        }

        /* AJUSTES DE VISIBILIDADE PARA CADASTROS E DASHBOARD (PONTOS 1 E 2) */
        .container { 
            display: none; 
            width: 100%; 
            padding: 15px; 
            flex-direction: column; 
            min-height: calc(100vh - 150px);
        }
        .config-list { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        
        /* DASHBOARD GRID v3.1 INTEGRAL */
        .dash-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<header>
    <h1>CeoCard</h1>
    <h2 id="page-subtitle" style="font-size: 0.85rem; color: #bdc3c7; margin: 5px 0 0 0; font-weight: normal;">Agenda</h2>
</header>

<main id="content-area">
    <div id="timeline-view" class="container" style="display:flex;">
        <div id="timelineList" style="width: 100%;"></div>
    </div>

    <div id="dashboard-view" class="container">
        <div class="dash-grid">
            <div class="dash-card"><i class="fa-solid fa-person-walking"></i><span id="stat-visitas">0</span><label>Visitas</label></div>
            <div class="dash-card"><i class="fa-solid fa-clock"></i><span id="stat-horas">0h</span><label>Horas</label></div>
            <div class="dash-card"><i class="fa-solid fa-check-double"></i><span id="stat-resolvidos">0</span><label>Resolvidos</label></div>
            <div class="dash-card"><i class="fa-solid fa-user-slash"></i><span id="stat-pendentes" style="color:#e74c3c;">0</span><label>Pendentes</label></div>
        </div>
        
        <div class="dash-card" style="width: 100%; margin-bottom: 20px;">
            <label id="eficiencia-label">Eficiência Mensal</label>
            <div id="eficiencia-bar" style="width: 100%; height: 10px; background: #eee; border-radius: 5px; overflow: hidden; margin-top: 8px;">
                <div id="eficiencia-fill" style="width: 0%; height: 100%; background: #2ecc71;"></div>
            </div>
        </div>

        <div id="board-container-inner" style="width: 100%; display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px;">
            </div>
    </div>

    <div id="clientes-view" class="container">
        <div class="search-container">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input type="text" id="searchClient" placeholder="Filtrar clientes..." oninput="filtrarClientes()">
        </div>
        <div id="clientsList" class="clients-grid"></div>
    </div>

    <div id="config-view" class="container">
        <div class="config-list">
            <div class="config-item" onclick="toggleModal('modalCliente')">
                <i class="fa-solid fa-user-plus"></i>
                <div><strong>Gerir Clientes</strong><br><small>Cadastro completo com endereços</small></div>
            </div>
            <div class="config-item" onclick="toggleModal('modalRamo')">
                <i class="fa-solid fa-briefcase"></i>
                <div><strong>Ramos de Atividade</strong><br><small>Segmentação de mercado</small></div>
            </div>
            <div class="config-item" onclick="toggleModal('modalCategoria')">
                <i class="fa-solid fa-sliders"></i>
                <div><strong>Status do Quadro</strong><br><small>Configurar colunas</small></div>
            </div>
        </div>
    </div>
</main>

<nav class="bottom-nav">
    <button onclick="switchView('timeline')" class="nav-item active" id="btn-nav-timeline">
        <i class="fa-solid fa-calendar-days"></i><span>Agenda</span>
    </button>
    <button onclick="switchView('dashboard')" class="nav-item" id="btn-nav-dashboard">
        <i class="fa-solid fa-chart-line"></i><span>Dash</span>
    </button>
    <button onclick="toggleModal('modalAgendamento')" class="nav-item central">
        <i class="fa-solid fa-plus-circle"></i>
    </button>
    <button onclick="switchView('clientes')" class="nav-item" id="btn-nav-clientes">
        <i class="fa-solid fa-users"></i><span>Clientes</span>
    </button>
    <button onclick="switchView('config')" class="nav-item" id="btn-nav-config">
        <i class="fa-solid fa-gears"></i><span>Cadastros</span>
    </button>
</nav>

<div id="modalCliente" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fa-solid fa-user-plus"></i> Novo Cliente</h2>
            <span class="close" onclick="toggleModal('modalCliente')">&times;</span>
        </div>
        <form id="formCliente" class="grid-form">
            <input type="text" id="cliCodigo" placeholder="Cód" required>
            <input type="text" id="cliRazao" placeholder="Razão Social">
            <input type="text" id="cliFantasia" placeholder="Nome Fantasia" required>
            <select id="cliRamo" required><option value="">Selecione o Ramo</option></select>
            <input type="text" id="cliRua" placeholder="Logradouro/Rua" class="full-width">
            <input type="text" id="cliNumero" placeholder="Nº">
            <input type="text" id="cliBairro" placeholder="Bairro">
            <input type="text" id="cliCidade" placeholder="Cidade">
            <input type="text" id="cliEstado" placeholder="UF">
            <input type="text" id="cliContatoNome" placeholder="Contato">
            <input type="tel" id="cliTelefone" placeholder="Telefone">
            <textarea id="cliObs" placeholder="Observações" class="full-width" rows="2"></textarea>
            <button type="submit" class="btn-save full-width">Salvar Cliente</button>
        </form>
    </div>
</div>

<div id="modalRamo" class="modal-overlay"><div class="modal-content"><div class="modal-header"><h2>Ramos</h2><span class="close" onclick="toggleModal('modalRamo')">&times;</span></div><form id="formRamo"><input type="text" id="ramoNome" required><button type="submit" class="btn-save" style="width:100%; margin-top:10px;">Adicionar</button></form><div id="listaRamosUI"></div></div></div>
<div id="modalCategoria" class="modal-overlay"><div class="modal-content"><div class="modal-header"><h2>Colunas</h2><span class="close" onclick="toggleModal('modalCategoria')">&times;</span></div><form id="formCategoria"><input type="text" id="catNome" required><input type="color" id="catCor" value="#0079bf"><button type="submit" class="btn-save" style="width:100%; margin-top:10px;">Add</button></form><div id="listaCategoriasUI"></div></div></div>
<div id="modalAgendamento" class="modal-overlay"><div class="modal-content"><div class="modal-header"><h2>Agendar</h2><span class="close" onclick="toggleModal('modalAgendamento')">&times;</span></div><form id="formAgendamento" class="grid-form"><select id="ageCliente" class="full-width" required></select><input type="date" id="ageData" required><input type="time" id="ageHora" required><select id="ageTipo" class="full-width"><option value="Visita">Visita</option><option value="Reunião">Reunião</option></select><button type="submit" class="btn-save full-width">Agendar</button></form></div></div>

<div id="modalAtendimento" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="atendClienteNome">Atendimento</h2>
            <span id="badgeFinalizado" style="display:none; background:#2ecc71; color:white; padding:2px 8px; border-radius:10px; font-size:0.7rem;">CONCLUÍDO</span>
            <span class="close" onclick="toggleModal('modalAtendimento')">&times;</span>
        </div>
        <div class="atendimento-body">
            <div id="atendTimer" class="timer-display" style="font-size: 2.5rem; text-align: center; font-weight: bold; margin: 15px 0;">00:00:00</div>
            <div id="areaBotoesAtendimento" style="display: flex; gap: 10px;">
                <button id="btnCheckIn" class="btn-checkin" onclick="realizarCheckIn()" style="flex: 1; background: #27ae60; color: white; border: none; padding: 10px; border-radius: 5px;">Check-in</button>
                <button id="btnCheckOut" class="btn-checkout" onclick="realizarCheckOut()" disabled style="flex: 1; background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 5px;">Check-out</button>
            </div>
            <label style="font-size: 0.8rem; margin-top: 10px; display: block;">Relatório da Visita:</label>
            <textarea id="atendRelatorio" class="full-width" rows="4"></textarea>
            <div id="atendConfigExtras">
                <label style="font-size: 0.8rem; margin-top: 10px; display: block;">Status do Quadro após Checkout:</label>
                <select id="atendStatusFinal" class="full-width"></select>
                <div style="background: #f8f9fa; padding: 10px; border-radius: 8px; margin-top: 15px;">
                    <label style="font-weight: bold; font-size: 0.8rem;">Próximo Agendamento:</label>
                    <div class="grid-form" style="margin-top: 8px;"><input type="date" id="proxAgeData"><input type="time" id="proxAgeHora"></div>
                </div>
            </div>
            <div id="areaObservacaoPos" style="display:none; margin-top: 15px; border-top: 2px dashed #eee; padding-top: 10px;">
                <label style="font-size: 0.8rem; display: block;">Notas Adicionais:</label>
                <textarea id="atendObsPos" class="full-width" rows="3"></textarea>
                <button class="btn-save" style="width:100%; margin-top:10px; background:#2980b9;" onclick="salvarObservacaoPos()">Guardar Nota</button>
            </div>
        </div>
    </div>
</div>

<script src="c-script.js"></script>
</body>
</html>